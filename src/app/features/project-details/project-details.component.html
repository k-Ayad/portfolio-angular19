<div class="project-details-container" *ngIf="project">
  <!-- Breadcrumb Navigation -->
  <nav class="breadcrumb-nav" aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a routerLink="/">Home</a>
      </li>
      <li class="breadcrumb-item">
        <a routerLink="/all-projects">All Projects</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        Project Details
      </li>
    </ol>
  </nav>

  <!-- Project Header -->
  <header class="project-header">
    <h1 class="project-title">{{ project.title }}</h1>
    
    <p class="project-description">{{ project.description }}</p>

    <!-- Technology Badges -->
    <div class="tech-badges">
      <span
        *ngFor="let tech of project.technologies"
        class="tech-badge"
      >
        <i [class]="getTechIcon(tech)"></i>
        {{ tech }}
      </span>
    </div>

    <!-- Project Links -->
    <div class="project-links" *ngIf="relatedProjects.length > 0">
      <a
        *ngFor="let relatedProject of relatedProjects.slice(0, 1)"
        [routerLink]="['/project', relatedProject.id]"
        class="related-link"
      >
        {{ relatedProject.title }}
        <i class="fas fa-arrow-right"></i>
      </a>
    </div>
  </header>

  <!-- Image Carousel -->
  <section class="carousel-section">
    <div class="carousel-container">
      <button
        class="carousel-btn prev-btn"
        (click)="previousImage()"
        [disabled]="carouselImages.length <= 1"
        aria-label="Previous image"
      >
        <i class="fas fa-chevron-left"></i>
      </button>

      <div class="carousel-track">
        <div
          class="carousel-slide"
          [style.transform]="'translateX(-' + (currentImageIndex * 100) + '%)'"
        >
          <img
            *ngFor="let image of carouselImages; let i = index; trackBy: trackByIndex"
            [src]="image"
            [alt]="project.title + ' - Image ' + (i + 1)"
            class="carousel-image"
            loading="lazy"
          />
        </div>
      </div>

      <button
        class="carousel-btn next-btn"
        (click)="nextImage()"
        [disabled]="carouselImages.length <= 1"
        aria-label="Next image"
      >
        <i class="fas fa-chevron-right"></i>
      </button>

      <!-- Carousel Indicators -->
      <div class="carousel-indicators" *ngIf="carouselImages.length > 1">
        <button
          *ngFor="let image of carouselImages; let i = index; trackBy: trackByIndex"
          class="indicator"
          [class.active]="i === currentImageIndex"
          (click)="goToImage(i)"
          [attr.aria-label]="'Go to image ' + (i + 1)"
        ></button>
      </div>
    </div>
  </section>

  <!-- Project Information -->
  <section class="project-info">
    <div class="info-grid">
      <!-- Client Information -->
      <div class="info-card">
        <h3 class="info-title">
          <i class="fas fa-user"></i>
          Client
        </h3>
        <p class="info-content">{{ project.client }}</p>
      </div>

      <!-- Completion Date -->
      <div class="info-card">
        <h3 class="info-title">
          <i class="fas fa-calendar"></i>
          Completed
        </h3>
        <p class="info-content">{{ project.completionDate }}</p>
      </div>

      <!-- Category -->
      <div class="info-card">
        <h3 class="info-title">
          <i class="fas fa-tag"></i>
          Category
        </h3>
        <p class="info-content">{{ project.category }}</p>
      </div>

      <!-- Project Status -->
      <div class="info-card">
        <h3 class="info-title">
          <i class="fas fa-check-circle"></i>
          Status
        </h3>
        <p class="info-content">{{ project.featured ? 'Featured' : 'Completed' }}</p>
      </div>
    </div>

    <!-- Extended Project Details (Optional) -->
    <div class="extended-details" *ngIf="project.challenges || project.solution || project.results">
      <div class="detail-section" *ngIf="project.challenges">
        <h3 class="section-title">Challenges</h3>
        <p class="section-content">{{ project.challenges }}</p>
      </div>

      <div class="detail-section" *ngIf="project.solution">
        <h3 class="section-title">Solution</h3>
        <p class="section-content">{{ project.solution }}</p>
      </div>

      <div class="detail-section" *ngIf="project.results">
        <h3 class="section-title">Results</h3>
        <p class="section-content">{{ project.results }}</p>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button
        *ngIf="project.liveUrl"
        class="action-btn primary-btn"
        (click)="openLink(project.liveUrl)"
      >
        <i class="fas fa-external-link-alt"></i>
        View Live Project
      </button>

      <button
        *ngIf="project.githubUrl"
        class="action-btn secondary-btn"
        (click)="openLink(project.githubUrl)"
      >
        <i class="fab fa-github"></i>
        View on GitHub
      </button>

      <button class="action-btn secondary-btn" (click)="goBack()">
        <i class="fas fa-arrow-left"></i>
        Back to Projects
      </button>
    </div>
  </section>

  <!-- Related Projects -->
  <section class="related-projects" *ngIf="relatedProjects.length > 0">
    <h2 class="section-heading">Related Projects</h2>
    
    <div class="related-grid">
      <article
        *ngFor="let relatedProject of relatedProjects; trackBy: trackByProjectId"
        class="related-card"
        [routerLink]="['/project', relatedProject.id]"
      >
        <div class="related-image-wrapper">
          <img
            [src]="relatedProject.image"
            [alt]="relatedProject.title"
            class="related-image"
            loading="lazy"
          />
        </div>
        <div class="related-content">
          <h3 class="related-title">{{ relatedProject.title }}</h3>
          <p class="related-category">{{ relatedProject.category }}</p>
        </div>
      </article>
    </div>
  </section>
</div>

<!-- Loading/Error State -->
<div class="loading-state" *ngIf="!project">
  <div class="spinner"></div>
  <p>Loading project details...</p>
</div>
